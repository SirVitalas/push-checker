(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),c=n(5),s=n(4),o=n(6),u=n(0),i=n.n(u),l=n(30),p=n.n(l),d=n(8),m=n.n(d),h=n(15),f=function(){function e(){Object(a.a)(this,e),this._oldWorker="/sp-push-worker.js",this._newWorker="/sp-push-worker-fb.js",this._manifest="/sp-push-manifest.json"}return Object(r.a)(e,[{key:"_checkType",value:function(){var e=Object(h.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.headers.get("Content-Type");case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return","not found");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getGcmSenderId",value:function(){var e=Object(h.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t).concat(this._manifest));case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return","not found");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getIndexPageBody",value:function(){var e=Object(h.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t));case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.text();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",n.status);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getManifestContentType",value:function(e){return this._checkType("".concat(e).concat(this._manifest))}},{key:"getNewWorkerContentType",value:function(e){return this._checkType("".concat(e).concat(this._newWorker))}},{key:"getOldWorkerContentType",value:function(e){return this._checkType("".concat(e).concat(this._oldWorker))}}]),e}(),y=function(e){var t,n,a=e.type,r=e.senderId;return t=null==r?i.a.createElement("font",{color:"red"},"not found"):r?i.a.createElement("font",{color:"lime"},"correct"):i.a.createElement("font",{color:"red"},"incorrect"),n=a&&a.includes("application/json")?i.a.createElement("font",{color:"lime"},a):i.a.createElement("font",{color:"red"},a),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Expected content type:"),"  application/json"),i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Current content type:")," ",n),i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"gcm_sender_id:")," ",t," "))},g=n(10),b=n(1),k=n.n(b),v=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).checkService=new f,n.state={contentType:null,senderId:null,success:!1,warning:!1,danger:!1,key:k.a.generate()},n.onErrorContentType=function(e){n.setState({danger:!0,success:!1,contentType:"not found",key:k.a.generate()})},n.onErrorSendrId=function(e){n.setState({danger:!0,success:!1,senderId:null})},n.getContentType=function(){n.props.url&&n.checkService.getManifestContentType(n.props.url).then(function(e){e.includes("application/json")?n.setState({success:!0,danger:!1,contentType:e,key:k.a.generate()}):n.setState({danger:!0,success:!1,contentType:e,key:k.a.generate()})}).catch(n.onErrorContentType)},n.getGcmSenderId=function(){n.props.url&&n.checkService.getGcmSenderId(n.props.url).then(function(e){Object.values(e).includes("300013155679")?n.setState({success:!0,danger:!1,senderId:!0}):n.setState({danger:!0,success:!1,senderId:!1})}).catch(n.onErrorSendrId)},n.setPanelType=function(e){var t="card mb-3";return e.success||e.warning||e.danger?e.success?t+=" border-success":e.danger&&(t+=" border-danger"):t+=" border-primary",t},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.count!==this.props.count&&(this.getContentType(),this.getGcmSenderId())}},{key:"render",value:function(){var e=this.state,t=e.contentType,n=e.senderId,a=this.setPanelType(this.state);return i.a.createElement(g.Animated,{animationIn:"bounceIn",animationOut:"bounceOut",isVisible:!0,animateOnMount:!0,key:this.state.key},i.a.createElement("div",{className:a,style:{maxWidth:"20rem"}},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",null,"sp-push-manifest.json")),i.a.createElement(y,{type:t,senderId:n})))}}]),t}(i.a.Component),E=function(e){var t,n=e.type;return t=n&&n.includes("application/json")?i.a.createElement("font",{color:"lime"},n):i.a.createElement("font",{color:"red"},n),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Expected content type:"),"  application/json"),i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Current content type:")," ",t))},w=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).checkService=new f,n.state={contentType:null,success:!1,danger:!1,key:k.a.generate()},n.getContentType=function(){n.props.url&&n.checkService.getManifestContentType(n.props.url).then(function(e){e.includes("application/json")?n.setState({success:!0,danger:!1,contentType:e,key:k.a.generate()}):n.setState({danger:!0,success:!1,contentType:e,key:k.a.generate()})}).catch(n.onErrorContentType)},n.onErrorContentType=function(e){n.setState({danger:!0,success:!1,contentType:"not found",key:k.a.generate()})},n.setPanelType=function(e){var t="card mb-3";return e.success||e.warning||e.danger?e.success?t+=" border-success":e.danger&&(t+=" border-danger"):t+=" border-primary",t},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.count!==this.props.count&&this.getContentType()}},{key:"render",value:function(){var e=this.state.contentType,t=this.setPanelType(this.state),n=this.props.worker;return i.a.createElement(g.Animated,{animationIn:"bounceIn",animationOut:"bounceOut",isVisible:!0,animateOnMount:!0,key:this.state.key},i.a.createElement("div",{className:t,style:{maxWidth:"20rem"}},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",null,n)),i.a.createElement("div",{className:"card-body"},i.a.createElement(E,{type:e}))))}}]),t}(i.a.Component),j=function(e){var t,n,a=e.manifest,r=e.workers;return t=null==a?i.a.createElement("font",{color:"red"},"index page not found"):a?i.a.createElement("font",{color:"red"},"manifest was found!"):i.a.createElement("font",{color:"lime"},"manifest not found"),n=r?i.a.createElement("font",{color:"red"},r):i.a.createElement("font",null,"other workers not found"),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Expected result:"),"  not found"),i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Checking for manifest:")," ",t),i.a.createElement("p",{className:"card-text"},i.a.createElement("b",null,"Checking for other push workers:")," ",n))},O=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).checkService=new f,n.state={manifest:null,success:!1,warning:!1,danger:!1,pushWorkers:null,key:k.a.generate()},n.isManifestPresent=function(){n.props.url&&n.checkService.getIndexPageBody(n.props.url).then(function(e){var t="",a=!1;e.includes("OneSignalSDK.js")?t+="onesignal ":e.includes("push4site")?t+="push4site ":e.includes("pushcrew")?t+="pushcrew ":e.includes("gravitec")?t+="gravitec ":e.includes("esputnik")?t+="esputnik ":e.includes("pushwoosh")&&(t+="pushwoosh "),e.includes("manifest")&&(a=!0),a||t.length>0?n.setState({success:!1,manifest:a,warning:!0,danger:!1,pushWorkers:t,key:k.a.generate()}):n.setState({success:!0,warning:!1,danger:!1,manifest:!1,pushWorkers:null,key:k.a.generate()})}).catch(function(e){console.log(e),n.setState({warning:!1,danger:!0,success:!1,manifest:null,pushWorkers:null,key:k.a.generate()})})},n.setPanelType=function(e){var t="card mb-3";return e.success||e.warning||e.danger?e.success?t+=" border-success":e.warning?t+=" border-warning":e.danger&&(t+=" border-danger"):t+=" border-primary",t},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.count!==this.props.count&&this.isManifestPresent()}},{key:"render",value:function(){var e=this.state,t=e.manifest,n=e.pushWorkers,a=this.setPanelType(this.state);return i.a.createElement(g.Animated,{animationIn:"bounceIn",animationOut:"bounceOut",isVisible:!0,animateOnMount:!0,key:this.state.key},i.a.createElement("div",{className:a,style:{maxWidth:"20rem"}},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",null,"Index page")),i.a.createElement(j,{manifest:t,workers:n})))}}]),t}(i.a.Component),x=(n(103),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).getUrl=function(){var e=n.urlValue.value.trim();e&&!e.match(/^http([s]?):\/\/.*/)&&(e="https://"+e.replace(/\/$/,"")),n.props.onClick(e)},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"form-inline input-width"},i.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"https://example.com",ref:function(t){return e.urlValue=t}}),i.a.createElement("button",{onClick:this.getUrl,className:"btn btn-secondary my-2 my-sm-0"},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c"))}}]),t}(i.a.Component)),T=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={url:"https://sirvitalas.github.io",count:0},n.updateUrl=function(e){n.setState({url:e,count:n.state.count+1})},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",{className:"center-me"},"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a push \u0441\u0435\u0440\u0432\u0438\u0441\u0430"),i.a.createElement(x,{onClick:this.updateUrl}),i.a.createElement("p",null),i.a.createElement("div",{className:"one-line"},i.a.createElement(v,{url:this.state.url,count:this.state.count}),i.a.createElement(w,{worker:"sp-push-worker-fb.js",url:this.state.url,count:this.state.count}),i.a.createElement(O,{url:this.state.url,count:this.state.count})))}}]),t}(i.a.Component);p.a.render(i.a.createElement(T,null),document.getElementById("root"))},31:function(e,t,n){e.exports=n(104)}},[[31,1,2]]]);
//# sourceMappingURL=main.5d363bbd.chunk.js.map